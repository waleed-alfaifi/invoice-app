<form class="mt-4" [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="pb-8 space-y-4" formGroupName="sender">
    <h4 class="mb-3 text-primary">Bill From</h4>

    <div class="flex flex-col space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="sender-street"
        >Street Address</label
      >
      <input
        appInput
        type="text"
        id="sender-street"
        formControlName="street"
        placeholder="Enter street address" />
    </div>

    <div class="flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0">
      <div class="flex flex-col w-full space-y-1 sm:w-1/2">
        <label class="text-xs text-color-3 dark:text-color-1" for="sender-city"
          >City</label
        >

        <input
          appInput
          type="text"
          formControlName="city"
          id="sender-city"
          placeholder="Enter city" />
      </div>

      <div class="flex flex-col w-full space-y-1 sm:w-1/2">
        <label class="text-xs text-color-3 dark:text-color-1" for="sender-post"
          >Post Code</label
        >

        <input
          appInput
          type="text"
          formControlName="postCode"
          id="sender-post"
          placeholder="Enter post code" />
      </div>
    </div>

    <div class="flex flex-col flex-grow w-full space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="sender-country"
        >Country</label
      >

      <input
        appInput
        type="text"
        formControlName="country"
        id="sender-country"
        placeholder="Enter country" />
    </div>
  </div>

  <div class="pb-8 space-y-4" formGroupName="client">
    <h4 class="mb-3 text-primary">Bill To</h4>

    <div class="flex flex-col space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="client-name"
        >Client's Name</label
      >
      <input
        appInput
        type="text"
        formControlName="name"
        id="client-name"
        placeholder="Enter client name" />
    </div>

    <div class="flex flex-col space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="client-email"
        >Client's Email</label
      >
      <input
        appInput
        type="email"
        formControlName="email"
        id="client-email"
        placeholder="Enter client email" />
    </div>

    <div class="flex flex-col space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="client-street"
        >Street Address</label
      >
      <input
        appInput
        type="text"
        formControlName="street"
        id="client-street"
        placeholder="Enter street address" />
    </div>

    <div class="flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0">
      <div class="flex flex-col w-full space-y-1 sm:w-1/2">
        <label class="text-xs text-color-3 dark:text-color-1" for="client-city"
          >City</label
        >

        <input
          appInput
          type="text"
          formControlName="city"
          id="client-city"
          placeholder="Enter city" />
      </div>

      <div class="flex flex-col w-full space-y-1 sm:w-1/2">
        <label class="text-xs text-color-3 dark:text-color-1" for="client-post"
          >Post Code</label
        >

        <input
          appInput
          type="text"
          formControlName="postCode"
          id="client-post"
          placeholder="Enter post code" />
      </div>
    </div>

    <div class="flex flex-col flex-grow w-full space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="client-country"
        >Country</label
      >

      <input
        appInput
        type="text"
        formControlName="country"
        id="client-country"
        placeholder="Enter country" />
    </div>
  </div>

  <div class="pb-8 space-y-4" formGroupName="meta">
    <div class="flex flex-col w-full space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="invoice-date"
        >Invoice Date</label
      >
      <input appInput type="date" formControlName="date" id="invoice-date" />
    </div>

    <div class="flex flex-col space-y-1">
      <label class="text-xs text-color-3 dark:text-color-1" for="payment-terms"
        >Payment Terms</label
      >

      <select formControlName="terms" id="payment-terms" appInput>
        <option value="">Select payment terms</option>
        <option *ngFor="let term of terms" [value]="term[0]">
          {{ term[1] }}
        </option>
      </select>
    </div>

    <div class="flex flex-col space-y-1">
      <label
        class="text-xs text-color-3 dark:text-color-1"
        for="project-description"
        >Project Description</label
      >
      <input
        appInput
        type="text"
        formControlName="description"
        id="project-description"
        placeholder="Enter project description" />
    </div>
  </div>

  <!-- Items list start -->
  <div class="space-y-4">
    <h3 class="font-light text-color-3 dark:text-color-1">Item List</h3>

    <!-- Item start -->
    <ng-container *ngFor="let item of items">
      <div class="flex flex-col space-y-1">
        <label class="text-xs text-color-3 dark:text-color-1">Item Name </label>
        <input
          appInput
          [(ngModel)]="item.name"
          [ngModelOptions]="{ standalone: true }"
          type="text"
          placeholder="Enter item name" />
      </div>

      <div class="flex space-x-3">
        <div class="flex flex-col w-1/5 space-y-1">
          <label class="text-xs text-color-3 dark:text-color-1">Qty.</label>
          <input
            appInput
            [(ngModel)]="item.quantity"
            [ngModelOptions]="{ standalone: true }"
            type="number"
            placeholder="1" />
        </div>
        <div class="flex flex-col w-1/4 space-y-1">
          <label class="text-xs text-color-3 dark:text-color-1">Price</label>
          <input
            appInput
            [(ngModel)]="item.price"
            [ngModelOptions]="{ standalone: true }"
            type="number"
            placeholder="150" />
        </div>
        <div class="flex flex-col w-1/5 space-y-1">
          <span class="text-xs text-color-3 dark:text-color-1">Total</span>
          <span
            class="flex items-center h-full text-sm text-color-3 dark:text-color-1"
            >{{ item.price * item.quantity | number: "2.2" }}</span
          >
        </div>
        <div class="flex items-center justify-start w-1/5">
          <button
            type="button"
            class="mt-5 text-sm text-color-2"
            title="Delete item"
            (click)="deleteItem(item.id)">
            X
          </button>
        </div>
      </div>
    </ng-container>
    <!-- Item end -->
  </div>

  <button
    (click)="addNewItem()"
    type="button"
    class="w-full px-3 py-4 mt-10 text-xs bg-gray-200 rounded-full drop text-color-3 dark:text-color-1 dark:bg-secondary">
    + Add New Item
  </button>
  <!-- Items list end -->

  <!-- Actions start -->
  <div
    class="flex justify-center p-6 mt-10 -mx-6 space-x-2 bg-white shadow-2xl dark:bg-card-dark">
    <button
      (click)="onCancel()"
      type="button"
      class="px-2 text-xs font-bold transition-transform rounded-full text-color-3 bg-light-bg active:translate-y-1 dark:text-color-1 dark:bg-secondary">
      <ng-content select="[cancelText]"></ng-content>
    </button>
    <button
      [disabled]="disableForm"
      *ngIf="!isEditMode"
      type="button"
      class="px-2 text-xs transition-transform rounded-full disabled:opacity-80 text-color-1 bg-secondary active:translate-y-1 dark:bg-slate-600"
      (click)="saveAsDraft()">
      Save as Draft
    </button>
    <button
      [disabled]="disableForm"
      type="submit"
      class="px-2 py-3 text-xs text-white transition-transform rounded-full disabled:opacity-80 bg-primary hover:bg-primary-light active:translate-y-1">
      <ng-content select="[submitText]"></ng-content>
    </button>
  </div>
  <!-- Actions end -->
</form>
